{% extends "admin/base.html" %}

{% block title %}Edit Post - Admin{% endblock %}

{% block content %}
<h2>Edit Post</h2>

<form method="POST" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-top: 1.5rem;">
    <div class="form-group">
        <label for="title">Title *</label>
        <input type="text" id="title" name="title" value="{{ post.title }}" required>
    </div>
    
    <div class="form-group">
        <label for="content">Content * (HTML supported)</label>
        <textarea id="content" name="content" required>{{ post.content }}</textarea>
    </div>
    
    <div class="form-group">
        <label for="author">Author</label>
        <input type="text" id="author" name="author" value="{{ post.author }}">
    </div>
    
    <div class="form-group">
        <label for="published_date">Published Date</label>
        <input type="date" id="published_date" name="published_date" value="{% if post.published_date %}{{ post.published_date.strftime('%Y-%m-%d') }}{% else %}{{ today_date }}{% endif %}">
    </div>
    
    <div class="form-group">
        <label>Categories</label>
        <div class="checkbox-group">
            {% for category in categories %}
            <div class="checkbox-item">
                <input type="checkbox" id="cat_{{ category.id }}" name="categories" value="{{ category.name }}" 
                       {% if category in post_categories %}checked{% endif %}>
                <label for="cat_{{ category.id }}" style="margin: 0; font-weight: normal;">{{ category.name }}</label>
            </div>
            {% endfor %}
        </div>
        <input type="text" name="categories" placeholder="Or enter new categories (comma-separated)" style="margin-top: 0.5rem;">
    </div>
    
    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
        <button type="submit" class="btn btn-primary">Update Post</button>
        <a href="{{ url_for('admin_seo_posts') }}" class="btn btn-secondary">Cancel</a>
        <form method="POST" action="{{ url_for('admin_delete_post', post_id=post.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this post?');">
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
    </div>
</form>
{% endblock %}

