{% extends "base.html" %}

{% block title %}Home - Learning Master{% endblock %}
{% block description %}Learn Python, PHP, JavaScript, AWS, and modern web development with comprehensive tutorials, guides, and tips from Learning Master.{% endblock %}

{% block schema %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Learning Master",
  "url": "{{ request.url_root.rstrip('/') }}",
  "description": "Learn Python, PHP, JavaScript, AWS, and modern web development",
  "publisher": {
    "@type": "Organization",
    "name": "Learning Master",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ request.url_root.rstrip('/') }}{{ url_for('static', filename='images/logo.jpg') }}"
    }
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ request.url_root.rstrip('/') }}{{ url_for('search') }}?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">Learn Programming & Web Development</h1>
        <p class="hero-subtitle">Comprehensive tutorials, guides, and tips to master Python, PHP, JavaScript, AWS, and modern web development practices</p>
        <div class="hero-actions">
            <a href="{{ url_for('search') }}" class="btn btn-primary">Explore Articles</a>
            <a href="{{ url_for('about') }}" class="btn btn-secondary">Learn More</a>
        </div>
    </div>
</section>

<!-- Blog Posts Grid -->
<section class="posts-section">
    <div class="section-container">
        <div class="section-header">
            <h2 class="section-title">Latest Articles</h2>
            <p class="section-subtitle">Stay updated with our newest tutorials and guides</p>
        </div>
        
        {% if posts.items %}
        <div class="posts-grid">
            {% for post in posts.items %}
            <article class="post-card">
                <div class="post-card-image">
                    {% if post.featured_image %}
                    <img src="{{ post.featured_image }}" alt="{{ post.title }}" loading="lazy">
                    {% else %}
                    {% set first_image = post.content | process_content | regex_search('src="([^"]+)"') %}
                    {% if first_image %}
                    <img src="{{ first_image }}" alt="{{ post.title }}" loading="lazy">
                    {% else %}
                    <div class="post-card-placeholder">
                        <span class="placeholder-icon">üìù</span>
                    </div>
                    {% endif %}
                    {% endif %}
                    {% set first_category = post.categories.first() %}
                    {% if first_category %}
                    <div class="post-card-category">
                        <a href="{{ url_for('category_posts', slug=first_category.slug) }}" class="category-badge">
                            {{ first_category.name }}
                        </a>
                    </div>
                    {% endif %}
                </div>
                
                <div class="post-card-content">
                    <div class="post-card-meta">
                        <time datetime="{{ post.published_date.isoformat() }}" class="post-date">
                            {{ post.published_date.strftime('%B %d, %Y') }}
                        </time>
                        <span class="post-author">by {{ post.author }}</span>
                    </div>
                    
                    <h3 class="post-card-title">
                        <a href="{{ url_for('post_detail', slug=post.slug) }}">{{ post.title }}</a>
                    </h3>
                    
                    <p class="post-card-excerpt">
                        {{ post.content | process_content | striptags | truncate(150) }}
                    </p>
                    
                    <div class="post-card-footer">
                        <a href="{{ url_for('post_detail', slug=post.slug) }}" class="read-more-link">
                            Read more
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </a>
                        {% set post_categories = post.categories.all() %}
                        {% if post_categories %}
                        <div class="post-card-tags">
                            {% for category in post_categories[:3] %}
                            <a href="{{ url_for('category_posts', slug=category.slug) }}" class="tag-link">{{ category.name }}</a>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if posts.pages > 1 %}
        <div class="pagination-wrapper">
            <nav class="pagination" aria-label="Pagination">
                {% if posts.has_prev %}
                <a href="{{ url_for('index', page=posts.prev_num) }}" class="pagination-link pagination-prev">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </a>
                {% endif %}
                
                <div class="pagination-pages">
                    {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
                        {% if page_num %}
                            {% if page_num == posts.page %}
                            <span class="pagination-page pagination-current">{{ page_num }}</span>
                            {% else %}
                            <a href="{{ url_for('index', page=page_num) }}" class="pagination-page">{{ page_num }}</a>
                            {% endif %}
                        {% else %}
                            <span class="pagination-ellipsis">‚Ä¶</span>
                        {% endif %}
                    {% endfor %}
                </div>
                
                {% if posts.has_next %}
                <a href="{{ url_for('index', page=posts.next_num) }}" class="pagination-link pagination-next">
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </a>
                {% endif %}
            </nav>
        </div>
        {% endif %}
        
        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üìö</div>
            <h3 class="empty-state-title">No posts yet</h3>
            <p class="empty-state-text">Check back soon for new articles and tutorials!</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="newsletter-container">
        <div class="newsletter-content">
            <h2 class="newsletter-title">Stay Updated</h2>
            <p class="newsletter-subtitle">Subscribe to our newsletter and get the latest tutorials, tips, and guides delivered to your inbox.</p>
            <form class="newsletter-form" id="newsletter-form">
                <div class="newsletter-input-group">
                    <input type="email" id="newsletter-email" name="email" placeholder="Enter your email address" required class="newsletter-input">
                    <button type="submit" class="newsletter-button">Subscribe</button>
                </div>
                <p class="newsletter-note">We respect your privacy. Unsubscribe at any time.</p>
            </form>
            <div id="newsletter-message" class="newsletter-message" style="display: none;"></div>
        </div>
    </div>
</section>

<!-- Sidebar Content (if needed) -->
{% if categories or recent_posts %}
<aside class="sidebar-section">
    <div class="sidebar-container">
        {% if categories %}
        <div class="sidebar-widget widget-categories">
            <h3 class="widget-title">
                <span>üìÅ</span>
                <span>Categories</span>
            </h3>
            <ul class="widget-list">
                {% for category in categories[:15] %}
                <li>
                    <a href="{{ url_for('category_posts', slug=category.slug) }}" class="widget-link">
                        <span class="widget-link-icon">üè∑Ô∏è</span>
                        <span class="widget-link-text">{{ category.name }}</span>
                        <span class="widget-link-arrow">‚Üí</span>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        {% if recent_posts %}
        <div class="sidebar-widget widget-recent">
            <h3 class="widget-title">
                <span>üìù</span>
                <span>Recent Posts</span>
            </h3>
            <ul class="widget-list">
                {% for post in recent_posts %}
                <li>
                    <a href="{{ url_for('post_detail', slug=post.slug) }}" class="widget-link">
                        <span class="widget-link-icon">üìÑ</span>
                        <span class="widget-link-text">{{ post.title }}</span>
                        <span class="widget-link-arrow">‚Üí</span>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <div class="sidebar-widget widget-about">
            <h3 class="widget-title">
                <span>‚ÑπÔ∏è</span>
                <span>About Blog</span>
            </h3>
            <div class="widget-content">
                <p class="widget-text">Learning Master is your go-to resource for learning Python, PHP, JavaScript, AWS, and modern web development. We provide comprehensive tutorials, guides, and tips to help you master programming and web development.</p>
                <a href="{{ url_for('about') }}" class="widget-button">Learn More ‚Üí</a>
            </div>
        </div>
    </div>
</aside>
{% endif %}
{% endblock %}
